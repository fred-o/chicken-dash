<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>Module (chicken process) - The CHICKEN Scheme wiki</title>
<meta http-equiv="Content-Style-Type" content="text/css"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<link rel="stylesheet" type="text/css" href="../../chicken.css"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/></head>
<body>
<div id="menu">
<ul>
<li><a href="http://wiki.call-cc.org/" class="internal">Wiki</a></li>
<li><a href="http://code.call-cc.org/" class="internal">Download</a></li>
<li><a href="http://wiki.call-cc.org/manual/index" class="internal">Manual</a></li>
<li><a href="http://eggs.call-cc.org/" class="internal">Eggs</a></li>
<li><a href="http://api.call-cc.org/doc/" class="internal">API</a></li>
<li><a href="http://tests.call-cc.org/" class="internal">Tests</a></li>
<li><a href="http://bugs.call-cc.org/" class="internal">Bugs</a></li></ul></div>
<div id="search">
<form action="http://wiki.call-cc.org/search">
<div><label>free text<input type="text" name="text"/></label><label>identifier<input type="text" name="ident"/></label><input type="submit" value="search"/><a href="http://wiki.call-cc.org/search-help">search help</a></div></form></div>
<ul id="page-specific-links">
<li><a href="http://wiki.call-cc.org/man/5/Module%20(chicken%20process)?action=show">show</a></li>
<li><a href="http://wiki.call-cc.org/man/5/Module%20(chicken%20process)?action=edit" rel="nofollow">edit</a></li>
<li><a href="http://wiki.call-cc.org/man/5/Module%20(chicken%20process)?action=history">history</a></li></ul>
<div id="content">
<ul class="tags">
<li>manual</li></ul>
<div id="toc">
<ol>
<li><a href="Module (chicken process).html#module-chicken-process">Module (chicken process)</a>
<ol>
<li><a href="Module (chicken process).html#processes">Processes</a>
<ol>
<li><a href="Module (chicken process).html#process-execute">process-execute</a></li>
<li><a href="Module (chicken process).html#process-fork">process-fork</a></li>
<li><a href="Module (chicken process).html#process-run">process-run</a></li>
<li><a href="Module (chicken process).html#process-signal">process-signal</a></li>
<li><a href="Module (chicken process).html#process-spawn">process-spawn</a></li>
<li><a href="Module (chicken process).html#process-wait">process-wait</a></li>
<li><a href="Module (chicken process).html#process-sleep">process-sleep</a></li>
<li><a href="Module (chicken process).html#process">process</a></li>
<li><a href="Module (chicken process).html#process">process*</a></li>
<li><a href="Module (chicken process).html#create-session">create-session</a></li></ol></li>
<li><a href="Module (chicken process).html#shell-commands">Shell commands</a>
<ol>
<li><a href="Module (chicken process).html#qs">qs</a></li>
<li><a href="Module (chicken process).html#system">system</a></li>
<li><a href="Module (chicken process).html#system">system*</a></li></ol></li>
<li><a href="Module (chicken process).html#pipes">Pipes</a>
<ol>
<li><a href="Module (chicken process).html#call-with-input-pipe">call-with-input-pipe</a></li>
<li><a href="Module (chicken process).html#call-with-output-pipe">call-with-output-pipe</a></li>
<li><a href="Module (chicken process).html#close-input-pipe">close-input-pipe</a></li>
<li><a href="Module (chicken process).html#close-output-pipe">close-output-pipe</a></li>
<li><a href="Module (chicken process).html#create-pipe">create-pipe</a></li>
<li><a href="Module (chicken process).html#open-input-pipe">open-input-pipe</a></li>
<li><a href="Module (chicken process).html#open-output-pipe">open-output-pipe</a></li>
<li><a href="Module (chicken process).html#pipebuf">pipe/buf</a></li>
<li><a href="Module (chicken process).html#with-input-from-pipe">with-input-from-pipe</a></li>
<li><a href="Module (chicken process).html#with-output-to-pipe">with-output-to-pipe</a></li></ol></li>
<li><a href="Module (chicken process).html#windows-specific-notes">Windows specific notes</a></li></ol></li></ol></div><a href="Module (chicken process).html#module-chicken-process">
<a class="dashingAutolink" name="autolink-1139"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/Module%20%28chicken%20process%29"></a><a class="dashingAutolink" name="autolink-1144"></a><a class="dashAnchor" name="//apple_ref/cpp/Module/%28chicken%20process%29"></a><h2 id="module-chicken-process">Module (chicken process)</h2></a>
<p>This module offers procedures for interacting with subprocesses.</p><a href="Module (chicken process).html#processes">
<a class="dashingAutolink" name="autolink-1140"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/Processes"></a><h3 id="processes">Processes</h3></a><a href="Module (chicken process).html#process-execute">
<h4 id="process-execute">process-execute</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1145"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28process-execute%20PATHNAME%20%5BARGUMENT-LIST%20%5BENVIRONMENT-ALIST%5D%5D%29"></a><tt>(process-execute PATHNAME [ARGUMENT-LIST [ENVIRONMENT-ALIST]])</tt>
<br/></span>
<p>Replaces the running process with a new process image from the program stored at <tt>PATHNAME</tt>, using the C library function <tt>execvp(3)</tt>. If the optional argument <tt>ARGUMENT-LIST</tt> is given, then it should contain a list of strings which are passed as arguments to the subprocess. If the optional argument <tt>ENVIRONMENT-ALIST</tt> is supplied, then the library function <tt>execve(2)</tt> is used, and the environment passed in <tt>ENVIRONMENT-ALIST</tt> (which should be of the form <tt>((&#34;&lt;NAME&gt;&#34; . &#34;&lt;VALUE&gt;&#34;) ...)</tt>) is given to the invoked process. Note that <tt>execvp(3)</tt> respects the current setting of the <tt>PATH</tt> environment variable while <tt>execve(3)</tt> does not.</p>
<p>This procedure never returns; it either replaces the process with a new one or it raises an exception in case something went wrong executing the program.</p>
<p>On Windows, these procedures all have an additoinal optional parameter <tt>EXACT-FLAG</tt>, which defaults to <tt>#f</tt>. When <tt>#f</tt> is passed, any argument string with embedded whitespace will be wrapped in quotes. When <tt>#t</tt> no such wrapping occurs.</p><a href="Module (chicken process).html#process-fork">
<h4 id="process-fork">process-fork</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1146"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28process-fork%20%5BTHUNK%20%5BKILLOTHERS%3F%5D%5D%29"></a><tt>(process-fork [THUNK [KILLOTHERS?]])</tt>
<br/></span>
<p>Creates a new child process with the UNIX system call <tt>fork()</tt>. Returns either the PID of the child process or 0. If <tt>THUNK</tt> is given, then the child process calls it as a procedure with no arguments and terminates. If <tt>THUNK</tt> is given and the optional argument <tt>KILLOTHERS?</tt> is true, then kill all other existing threads in the child process, leaving only the current thread to run <tt>THUNK</tt> and terminate.</p>
<p><b>NOTE</b>: On native Windows builds (all except cygwin), this procedure is unimplemented and will raise an error.</p><a href="Module (chicken process).html#process-run">
<h4 id="process-run">process-run</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1147"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28process-run%20COMMANDLINE%29"></a><tt>(process-run COMMANDLINE)</tt>
<br/></span><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1148"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28process-run%20COMMAND%20ARGUMENT-LIST%29"></a><tt>(process-run COMMAND ARGUMENT-LIST)</tt>
<br/></span>
<p>Creates a new child process. The PID of the new process is returned.</p>
<ul>
<li>The single parameter version passes the <tt>COMMANDLINE</tt> to the system shell, so usual argument expansion can take place.  Be careful to properly quote arguments with the <tt>qs</tt> procedure to avoid shell injection vulnerabilities.</li>
<li>The multiple parameter version directly invokes the <tt>COMMAND</tt> with the <tt>ARGUMENT-LIST</tt>, and is vastly preferred over the single-parameter version because of its better safety.</li></ul><a href="Module (chicken process).html#process-signal">
<h4 id="process-signal">process-signal</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1149"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28process-signal%20PID%20%5BSIGNAL%5D%29"></a><tt>(process-signal PID [SIGNAL])</tt>
<br/></span>
<p>Sends <tt>SIGNAL</tt> to the process with the id <tt>PID</tt> using the UNIX system call <tt>kill()</tt>. <tt>SIGNAL</tt> defaults to the value of the variable <tt>signal/term</tt>.</p>
<p><b>NOTE</b>: On native Windows builds (all except cygwin), this procedure is unimplemented and will raise an error.</p><a href="Module (chicken process).html#process-spawn">
<h4 id="process-spawn">process-spawn</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1150"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28process-spawn%20MODE%20COMMAND%20%5BARGUMENT-LIST%20%5BENVIRONMENT-LIST%20%5BEXACT-FLAG%5D%5D%5D%29"></a><tt>(process-spawn MODE COMMAND [ARGUMENT-LIST [ENVIRONMENT-LIST [EXACT-FLAG]]])</tt>
<br/></span>
<p>Creates and runs a new process with the given <tt>COMMAND</tt> filename and the optional <tt>ARGUMENT-LIST</tt> and <tt>ENVIRONMENT-LIST</tt>. <tt>MODE</tt> specifies how exactly the process should be executed and must be one or more of the <tt>spawn/...</tt> flags listed below.</p>
<p>The <tt>EXACT-FLAG</tt>, default <tt>#f</tt>, controls quote-wrapping of argument strings. When <tt>#t</tt> quote-wrapping is not performed.</p>
<p>Returns:</p>
<ul>
<li>the exit status when synchronous</li>
<li>the PID when asynchronous</li>
<li>-1 when failure</li></ul>
<p><b>NOTE</b>: On all Unix-like builds (all except native MingW-based Windows platforms), this procedure is unimplemented and will raise an error.</p><span class="definition constant"><em>[constant]</em> <a class="dashingAutolink" name="autolink-1133"></a><a class="dashAnchor" name="//apple_ref/cpp/Constant/spawn%2Foverlay"></a><tt>spawn/overlay</tt>
<br/></span><span class="definition constant"><em>[constant]</em> <a class="dashingAutolink" name="autolink-1134"></a><a class="dashAnchor" name="//apple_ref/cpp/Constant/spawn%2Fwait"></a><tt>spawn/wait</tt>
<br/></span><span class="definition constant"><em>[constant]</em> <a class="dashingAutolink" name="autolink-1135"></a><a class="dashAnchor" name="//apple_ref/cpp/Constant/spawn%2Fnowait"></a><tt>spawn/nowait</tt>
<br/></span><span class="definition constant"><em>[constant]</em> <a class="dashingAutolink" name="autolink-1136"></a><a class="dashAnchor" name="//apple_ref/cpp/Constant/spawn%2Fnowaito"></a><tt>spawn/nowaito</tt>
<br/></span><span class="definition constant"><em>[constant]</em> <a class="dashingAutolink" name="autolink-1137"></a><a class="dashAnchor" name="//apple_ref/cpp/Constant/spawn%2Fdetach"></a><tt>spawn/detach</tt>
<br/></span>
<p>These variables contains special flags that specify the exact semantics of <tt>process-spawn</tt>:</p>
<ul>
<li><tt>spawn/overlay</tt> replaces the current process with the new one.</li>
<li><tt>spawn/wait</tt> suspends execution of the current process until the spawned process returns.</li>
<li><tt>spawn/nowait</tt> does the opposite (<tt>spawn/nowaito</tt> is identical, according to the Microsoft documentation) and runs the process asynchronously.</li>
<li><tt>spawn/detach</tt> runs the new process in the background, without being attached to a console.</li></ul><a href="Module (chicken process).html#process-wait">
<h4 id="process-wait">process-wait</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1151"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28process-wait%20%5BPID%20%5BNOHANG%5D%5D%29"></a><tt>(process-wait [PID [NOHANG]])</tt>
<br/></span>
<p>Suspends the current process until the child process with the id <tt>PID</tt> has terminated using the UNIX system call <tt>waitpid()</tt>. If <tt>PID</tt> is not given, then this procedure waits for any child process. If <tt>NOHANG</tt> is given and not <tt>#f</tt> then the current process is not suspended.  This procedure returns three values:</p>
<ul>
<li><tt>PID</tt> or 0, if <tt>NOHANG</tt> is true and the child process has not terminated yet.</li>
<li><tt>#t</tt> if the process exited normally or <tt>#f</tt> otherwise.</li>
<li>either the exit status, if the process terminated normally or the signal number that terminated/stopped the process.</li></ul>
<p>Note that suspending the current process implies that all threads are suspended as well.</p>
<p>On Windows, <tt>process-wait</tt> always returns <tt>#t</tt> for a terminated process and only the exit status is available. (Windows does not provide signals as an interprocess communication method.)</p><a href="Module (chicken process).html#process-sleep">
<h4 id="process-sleep">process-sleep</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1152"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28process-sleep%20SECONDS%29"></a><tt>(process-sleep SECONDS)</tt>
<br/></span>
<p>Puts the process to sleep for <tt>SECONDS</tt>. Returns either 0 if the time has completely elapsed, or the number of remaining seconds, if a signal occurred.</p><a href="Module (chicken process).html#process">
<h4 id="process">process</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1153"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28process%20COMMANDLINE%29"></a><tt>(process COMMANDLINE)</tt>
<br/></span><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1154"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28process%20COMMAND%20ARGUMENT-LIST%20%5BENVIRONMENT-ALIST%5D%29"></a><tt>(process COMMAND ARGUMENT-LIST [ENVIRONMENT-ALIST])</tt>
<br/></span>
<p>Creates a subprocess and returns three values: an input port from which data written by the sub-process can be read, an output port from which any data written to will be received as input in the sub-process and the process-id of the started sub-process. Blocking reads and writes to or from the ports returned by <tt>process</tt> only block the current thread, not other threads executing concurrently.</p>
<p>Standard error for the subprocess is linked up to the current process&#39;s standard error (see <tt>process*</tt> if you want to reify its standard error into a separate port).</p>
<ul>
<li>The single parameter version passes the string <tt>COMMANDLINE</tt> to the host-system&#39;s shell that is invoked as a subprocess.</li>
<li>The multiple parameter version directly invokes the <tt>COMMAND</tt> as a subprocess. The <tt>ARGUMENT-LIST</tt> is directly passed, as is <tt>ENVIRONMENT-ALIST</tt>. These arguments have the same form as the ones of <tt>process-execute</tt>.</li></ul>
<p>Not using the shell may be preferrable for security reasons.</p>
<p>Once both the input- and output ports are closed, an implicit <tt>waitpid(3)</tt> is done to wait for the subprocess to finish or to reap a subprocess that has terminated. If the subprocess has not finished, waiting for it will necessarily block all executing threads.</p><a href="Module (chicken process).html#process">
<h4 id="process">process*</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1155"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28process%2A%20COMMANDLINE%29"></a><tt>(process* COMMANDLINE)</tt>
<br/></span><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1156"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28process%2A%20COMMAND%20ARGUMENT-LIST%20%5BENVIRONMENT-ALIST%5D%29"></a><tt>(process* COMMAND ARGUMENT-LIST [ENVIRONMENT-ALIST])</tt>
<br/></span>
<p>Like <tt>process</tt> but returns 4 values: an input port from which data written by the sub-process can be read, an output port from which any data written to will be received as input in the sub-process, the process-id of the started sub-process, and an input port from which data written by the sub-process to <tt>stderr</tt> can be read.</p><a href="Module (chicken process).html#create-session">
<h4 id="create-session">create-session</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1157"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28create-session%29"></a><tt>(create-session)</tt>
<br/></span>
<p>Creates a new session if the calling process is not a process group leader and returns the session ID.</p>
<p><b>NOTE</b>: On native Windows builds (all except cygwin), this procedure is unimplemented and will raise an error.</p><a href="Module (chicken process).html#shell-commands">
<a class="dashingAutolink" name="autolink-1141"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/Shell%20commands"></a><h3 id="shell-commands">Shell commands</h3></a>
<p>The commands below are all string-based.  This means you have to be very careful to properly quote any arguments to subprocesses, to avoid shell injection bugs which can lead to arbitrary code execution.</p>
<p>You can quote arguments with the <tt>qs</tt> procedure, but it is strongly recommended you use <tt>fork</tt> with <tt>process-execute</tt> or the multi-argument versions of the <tt>process</tt>, <tt>process*</tt> or <tt>process-run</tt> procedures.</p><a href="Module (chicken process).html#qs">
<h4 id="qs">qs</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1158"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28qs%20STRING%20%5BPLATFORM%5D%29"></a><tt>(qs STRING [PLATFORM])</tt>
<br/></span>
<p>Escapes <tt>STRING</tt> suitably for passing to a shell command on <tt>PLATFORM</tt>. <tt>PLATFORM</tt> defaults to the value of <tt>(build-platform)</tt> and indicates in which style the argument should be quoted. On Windows systems, the string is simply enclosed in double-quote (<tt>&#34;</tt>) characters, on UNIXish systems, characters that would have a special meaning to the shell are escaped using backslash (<tt>\</tt>).</p><a href="Module (chicken process).html#system">
<h4 id="system">system</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1159"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28system%20STRING%29"></a><tt>(system STRING)</tt>
<br/></span>
<p>Execute shell command. The functionality offered by this procedure depends on the capabilities of the host shell. If the forking of a subprocess failed, an exception is raised. Otherwise the return status of the subprocess is returned unaltered.</p>
<p>On a UNIX system, that value is the raw return value of waitpid(2), which contains signal, core dump and exit status.    It is 0 on success.  To pull out the signal number or exit status portably requires POSIX calls, but in a pinch you can use something like this:</p>
<pre><tt class="highlight scheme-language"><span class="comment">;; Returns two values: #t if the process exited normally or #f otherwise;
</span><span class="comment">;; and either the exit status, or the signal number if terminated via signal.
</span><span class="paren1">(<span class="default"><i><span class="symbol">define</span></i> <span class="paren2">(<span class="default">process-status rc</span>)</span>
  <span class="paren2">(<span class="default"><i><span class="symbol">define</span></i> <span class="paren3">(<span class="default">wait-signaled? x</span>)</span> <span class="paren3">(<span class="default">not <span class="paren4">(<span class="default">= 0 <span class="paren5">(<span class="default">bitwise-and x 127</span>)</span></span>)</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="default"><i><span class="symbol">define</span></i> <span class="paren3">(<span class="default">wait-signal x</span>)</span> <span class="paren3">(<span class="default">bitwise-and x 127</span>)</span></span>)</span>
  <span class="paren2">(<span class="default"><i><span class="symbol">define</span></i> <span class="paren3">(<span class="default">wait-exit-status x</span>)</span> <span class="paren3">(<span class="default">arithmetic-shift x -8</span>)</span></span>)</span>
  <span class="paren2">(<span class="default"><i><span class="symbol">if</span></i> <span class="paren3">(<span class="default">wait-signaled? rc</span>)</span>
      <span class="paren3">(<span class="default">values #f <span class="paren4">(<span class="default">wait-signal rc</span>)</span></span>)</span>
      <span class="paren3">(<span class="default">values #t <span class="paren4">(<span class="default">wait-exit-status rc</span>)</span></span>)</span></span>)</span></span>)</span>

#<span class="comment">;&gt; (process-status (system &#34;exit 42&#34;))
</span>#t
42</tt></pre><a href="Module (chicken process).html#system">
<h4 id="system">system*</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1160"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28system%2A%20STRING%29"></a><tt>(system* STRING)</tt>
<br/></span>
<p>Similar to <tt>(system STRING)</tt>, but signals an error should the invoked program return a nonzero exit status.</p><a href="Module (chicken process).html#pipes">
<a class="dashingAutolink" name="autolink-1142"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/Pipes"></a><h3 id="pipes">Pipes</h3></a><a href="Module (chicken process).html#call-with-input-pipe">
<h4 id="call-with-input-pipe">call-with-input-pipe</h4></a><a href="Module (chicken process).html#call-with-output-pipe">
<h4 id="call-with-output-pipe">call-with-output-pipe</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1161"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28call-with-input-pipe%20CMDLINE%20PROC%20%5BMODE%5D%29"></a><tt>(call-with-input-pipe CMDLINE PROC [MODE])</tt>
<br/></span><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1162"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28call-with-output-pipe%20CMDLINE%20PROC%20%5BMODE%5D%29"></a><tt>(call-with-output-pipe CMDLINE PROC [MODE])</tt>
<br/></span>
<p>Call <tt>PROC</tt> with a single argument: a input- or output port for a pipe connected to the subprocess named in <tt>CMDLINE</tt>. If <tt>PROC</tt> returns normally, the pipe is closed and any result values are returned.</p><a href="Module (chicken process).html#close-input-pipe">
<h4 id="close-input-pipe">close-input-pipe</h4></a><a href="Module (chicken process).html#close-output-pipe">
<h4 id="close-output-pipe">close-output-pipe</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1163"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28close-input-pipe%20PORT%29"></a><tt>(close-input-pipe PORT)</tt>
<br/></span><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1164"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28close-output-pipe%20PORT%29"></a><tt>(close-output-pipe PORT)</tt>
<br/></span>
<p>Closes the pipe given in <tt>PORT</tt> and waits until the connected subprocess finishes. The exit-status code of the invoked process is returned.</p><a href="Module (chicken process).html#create-pipe">
<h4 id="create-pipe">create-pipe</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1165"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28create-pipe%29"></a><tt>(create-pipe)</tt>
<br/></span>
<p>The fundamental pipe-creation operator. Calls the C function <tt>pipe()</tt> and returns 2 values: the file-descriptors of the input- and output-ends of the pipe.</p>
<p>On Windows, there is an optional parameter <tt>MODE</tt>, which defaults to <tt>open/binary | open/noinherit</tt>. This can be <tt>open/binary</tt> or <tt>open/text</tt>, optionally or&#39;ed with <tt>open/noinherit</tt>.</p><a href="Module (chicken process).html#open-input-pipe">
<h4 id="open-input-pipe">open-input-pipe</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1166"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28open-input-pipe%20CMDLINE%20%5BMODE%5D%29"></a><tt>(open-input-pipe CMDLINE [MODE])</tt>
<br/></span>
<p>Spawns a subprocess with the command-line string <tt>CMDLINE</tt> and returns a port, from which the output of the process can be read. If <tt>MODE</tt> is specified, it should be the keyword <tt>#:text</tt> (the default) or <tt>#:binary</tt>.</p><a href="Module (chicken process).html#open-output-pipe">
<h4 id="open-output-pipe">open-output-pipe</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1167"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28open-output-pipe%20CMDLINE%20%5BMODE%5D%29"></a><tt>(open-output-pipe CMDLINE [MODE])</tt>
<br/></span>
<p>Spawns a subprocess with the command-line string <tt>CMDLINE</tt> and returns a port. Anything written to that port is treated as the input for the process.  If <tt>MODE</tt> is specified, it should be the keyword <tt>#:text</tt> (the default) or <tt>#:binary</tt>.</p><a href="Module (chicken process).html#pipebuf">
<h4 id="pipebuf">pipe/buf</h4></a><span class="definition constant"><em>[constant]</em> <a class="dashingAutolink" name="autolink-1138"></a><a class="dashAnchor" name="//apple_ref/cpp/Constant/pipe%2Fbuf"></a><tt>pipe/buf</tt>
<br/></span>
<p>This variable contains the maximal number of bytes that can be written atomically into a pipe or FIFO.</p><a href="Module (chicken process).html#with-input-from-pipe">
<h4 id="with-input-from-pipe">with-input-from-pipe</h4></a><a href="Module (chicken process).html#with-output-to-pipe">
<h4 id="with-output-to-pipe">with-output-to-pipe</h4></a><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1168"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28with-input-from-pipe%20CMDLINE%20THUNK%20%5BMODE%5D%29"></a><tt>(with-input-from-pipe CMDLINE THUNK [MODE])</tt>
<br/></span><span class="definition procedure"><em>[procedure]</em> <a class="dashingAutolink" name="autolink-1169"></a><a class="dashAnchor" name="//apple_ref/cpp/Procedure/%28with-output-to-pipe%20CMDLINE%20THUNK%20%5BMODE%5D%29"></a><tt>(with-output-to-pipe CMDLINE THUNK [MODE])</tt>
<br/></span>
<p>Temporarily set the value of <tt>current-input-port/current-output-port</tt> to a port for a pipe connected to the subprocess named in <tt>CMDLINE</tt> and call the procedure <tt>THUNK</tt> with no arguments. After <tt>THUNK</tt> returns normally the pipe is closed and the standard input-/output port is restored to its previous value and any result values are returned.</p>
<pre><tt class="highlight scheme-language"><span class="paren1">(<span class="default"><i><span class="symbol">with-output-to-pipe</span></i>
  <span class="string">&#34;gs -dNOPAUSE -sDEVICE=jpeg -dBATCH -sOutputFile=signballs.jpg -g600x600 -q -&#34;</span>
  <span class="paren2">(<span class="default"><i><span class="symbol">lambda</span></i> <span class="paren3">(<span class="default"></span>)</span>
    <span class="paren3">(<span class="default">print #&lt;&lt;EOF
 %!IOPSC-1993 <span class="keyword">%%Creator:</span> HAYAKAWA Takashi&lt;xxxxxxxx@xx.xxxxxx.xx.xx&gt;
 /C/neg/d/mul/R/rlineto/E/exp/H{{cvx <i><span class="symbol">def}repeat}def/T/dup/g/gt/r/roll/J/ifelse</span></i> 8
 H/A/copy<span class="paren4">(<span class="default">z&amp;v4QX&amp;93r9AxYQOZomQalxS2w!!O&amp;vMYa43d6r93rMYvx2dca!D&amp;cjSnjSnjjS3o!v&amp;6A
 X&amp;55SAxM1CD7AjYxTTd62rmxCnTdSST0g&amp;12wECST!&amp;!J0g&amp;D1!&amp;xM0!J0g!l&amp;544dC2Ac96ra!m&amp;3A
 F&amp;&amp;vGoGSnCT0g&amp;wDmlvGoS8wpn6wpS2wTCpS1Sd7ov7Uk7o4Qkdw!&amp;Mvlx1S7oZES3w!J!J!Q&amp;7185d
 Z&amp;lx1CS9d9nE4!k&amp;X&amp;MY7!&amp;1!J!x&amp;jdnjdS3odS!N&amp;mmx1C2wEc!G&amp;150Nx4!n&amp;2o!j&amp;43r!U&amp;0777d
 </span>]</span>&amp;2AY2A776ddT4oS3oSnMVC00VV0RRR45E42063rNz&amp;v7UX&amp;UOzF!F!J!<span class="paren4">[<span class="default">&amp;44ETCnVn!a&amp;1CDN!Y&amp;0M
 V1c&amp;j2AYdjmMdjjd!o&amp;1r!M</span>)</span>{<span class="paren4">(<span class="default"> </span>)</span>T 0 4 3 r put T<span class="paren4">(<span class="default">/</span>)</span>g{T<span class="paren4">(<span class="default">9</span>)</span>g{cvn}{cvi}J}{<span class="paren4">(<span class="default">$</span>)</span>g<span class="paren4">[<span class="default"></span>]</span>J}J
 cvx}forall/moveto/p/floor/w/div/S/add 29 H<span class="paren4">[<span class="default">{<span class="paren5">[<span class="default">{</span>]</span>setgray fill}for Y}for showpage
 EOF
 </span>)</span> </span>)</span> </span>)</span></span></span></tt></pre><a href="Module (chicken process).html#windows-specific-notes">
<a class="dashingAutolink" name="autolink-1143"></a><a class="dashAnchor" name="//apple_ref/cpp/Section/Windows%20specific%20notes"></a><h3 id="windows-specific-notes">Windows specific notes</h3></a>
<p>Use of UTF8 encoded strings for pathnames is not supported. Windows uses a 16-bit UNICODE encoding with special system calls for wide-character support.  Only single-byte string encoding can be used.</p>
<hr/>
<p>Previous: <a href="Module (chicken pretty-print).html" class="internal">Module (chicken pretty-print)</a></p>
<p>Next: <a href="Module (chicken process signal).html" class="internal">Module (chicken process signal)</a></p></div></body></html>